(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[15],{138:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),s=n.n(r),c=n(7),i=n(41),u=n(123),o=n(105),j=n(13),l=n(42),d=n.n(l),h=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(u.a,{bg:"white",text:"black",style:{width:"18rem"},className:"mb-2",children:[Object(a.jsxs)(u.a.Body,{children:[Object(a.jsx)(u.a.Title,{children:e.user.username}),Object(a.jsx)(u.a.Text,{children:e.user.email})]}),Object(a.jsx)(j.b,{to:"/users/".concat(e.url),className:"d-flex justify-content-center mb-3",children:Object(a.jsx)(o.a,{variant:"outline-info",type:"submit",children:"View"})})]})})},b=function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),s=n[0],c=n[1],u=Object(r.useState)(!1),o=Object(i.a)(u,2),j=o[0],l=o[1],b=Object(r.useState)(null),p=Object(i.a)(b,2),O=p[0],m=p[1],f=s.map((function(e){return Object(a.jsx)(h,{url:e.username,user:e},e._id)}));Object(r.useEffect)((function(){d.a.get("/app/users").then((function(e){return e.data})).then((function(e){c(e)})).then((function(){return l(!0)})).catch((function(e){e.response?401===e.response.status?m("You need to be logged in first"):500===e.response.status?m("internal server error"):m(e.response.data):m("an unknown error occured"),l(!0),console.error(e)}))}),[]);return Object(a.jsx)(a.Fragment,{children:j?O?Object(a.jsx)("span",{children:O}):Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Users"}),Object(a.jsxs)("div",{id:"userLinks",children:[Object(a.jsx)("h4",{children:"User Links"}),Object(a.jsx)("div",{className:"d-flex flex-wrap",children:f})]})]})," "]}):Object(a.jsx)("span",{children:"loading..."})})},p=n(18),O=n.n(p),m=n(26),f=n(43),x=n(44),v=n(24),g=n(46),y=n(45),S=n(115),k=n(111),w=n(122),D=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={data:{},errors:{},oldUserData:null,loaded:!1},a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(v.a)(a)),a.validateData=a.validateData.bind(Object(v.a)(a)),a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this;d.a.get("/app/users/".concat(this.props.match.params.username)).then((function(e){return e.data})).then((function(t){e.setState({oldUserData:t})})).catch((function(e){console.error(e)})).finally((function(){return e.setState({loaded:!0})}))}},{key:"handleInputChange",value:function(e){this.setState({data:e})}},{key:"validateData",value:function(e){var t=Object(k.a)(e),n=t.valid,a=t.invalidData;return n?(this.setState({errors:{}}),!0):(this.setState({errors:a}),!1)}},{key:"handleSubmit",value:function(){var e=Object(m.a)(O.a.mark((function e(t){var n,a,r,s,c,i=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),delete(n=this.state.data).username,delete n.password,a=Object(k.a)(n),r=a.valid,s=a.invalidData,r?(c={headers:{"Content-Type":"application/json"}},d.a.put("/app/users/".concat(this.props.match.params.username),n,c).then((function(e){200===e.status&&i.props.history.push("/users/".concat(i.props.match.params.username))}),(function(e){console.error(e)}))):this.setState({errors:s});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(a.jsx)(a.Fragment,{children:e.state.loaded?e.state.oldUserData?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Edit user information"}),Object(a.jsx)(S.a,{onSubmit:e.handleSubmit,noValidate:!0,children:Object(a.jsx)(w.a,{inputChange:e.handleInputChange,oldData:e.state.oldUserData,edit:!0,errors:e.state.errors,validate:e.validateData})})]})}):Object(a.jsx)("span",{children:"can't find the user"}):Object(a.jsx)("span",{children:"loading..."})})}}]),n}(s.a.Component),F=function(e){return Object(a.jsx)(j.b,{to:"/users/".concat(e.username,"/edit"),children:Object(a.jsx)(o.a,{className:"button-group",variant:"outline-success",children:"Edit"})})},C=function(e){var t=Object(c.f)(),n=Object(r.useState)(!1),s=Object(i.a)(n,2),u=s[0],j=s[1],l=Object(r.useState)(!1),h=Object(i.a)(l,2),b=h[0],p=h[1],f=Object(r.useState)(!1),x=Object(i.a)(f,2),v=x[0],g=x[1],y=function(){var n=Object(m.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1===v)j(!0),p(!0);else try{d.a.delete("/app/users/".concat(e.username)).then((function(e){200===e.status&&t.push("/users")}))}catch(a){console.error(a)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.a,{onClick:y,className:"button-group",disabled:b,variant:"outline-danger",children:"Delete"}),u?Object(a.jsx)("div",{children:Object(a.jsxs)(S.a.Group,{className:"mb-3",children:[Object(a.jsx)(S.a.Label,{children:"Enter User's name and hit Delete again"}),Object(a.jsx)(S.a.Control,{autoFocus:!0,onChange:function(t){t.target.value===e.username?(p(!1),g(!0)):(p(!0),g(!1))},name:"confirmationtext"})]})}):Object(a.jsx)(a.Fragment,{})]})},N=function(e){var t=e.user;return Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("h1",{children:t.username}),Object(a.jsxs)("p",{children:["Full Name: ",t.fullname]}),Object(a.jsxs)("p",{children:["Email: ",t.email]}),Object(a.jsxs)("p",{children:["Birthday: ","".concat(t.birthday.day,"/").concat(t.birthday.month,"/").concat(t.birthday.year)]}),Object(a.jsx)("p",{children:"Interests:"}),Object(a.jsx)("div",{children:t.interests.map((function(e,t){return Object(a.jsx)(o.a,{variant:"outline-earthbrown",className:"button-group",children:e},t)}))}),function(){var e={education:[],work:[]},n=t.experiences;for(var r in n)!n.hasOwnProperty(r)||"education"!==r&&"work"!==r||(e[r]=n[r]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Education:"}),e.education.map((function(e,t){return Object(a.jsx)("p",{children:"".concat(e.title,": ").concat(e.value)},t)})),Object(a.jsx)("p",{children:"Work:"}),e.work.map((function(e,t){return Object(a.jsx)("p",{children:"".concat(e.title,": ").concat(e.value)},t)}))]})}()]})},E=function(e){var t=Object(r.useState)(null),n=Object(i.a)(t,2),s=n[0],c=n[1],u=Object(r.useState)(!1),o=Object(i.a)(u,2),j=o[0],l=o[1],h=Object(r.useState)(null),b=Object(i.a)(h,2),p=b[0],O=b[1],m=Object(r.useState)(!1),f=Object(i.a)(m,2),x=f[0],v=f[1];Object(r.useEffect)((function(){var t=function(e){if(e.response){if(403===e.response.status)return;500===e.response.status?O("internal server error"):O(e.response.data)}else O("an unknown error occured");v(!1),console.error("oh no",e)};d.a.get("/app/users/".concat(e.match.params.username)).then((function(e){return e.data})).then((function(e){return c(e)})).then((function(){return d.a.get("/app/users/checkownership/".concat(e.match.params.username)).then((function(e){return e.data})).then((function(e){return e})).then((function(){return v(!0)})).catch(t)})).catch(t).finally((function(){return l(!0)}))}),[e.match.params.username]);return Object(a.jsx)(a.Fragment,{children:j?p?Object(a.jsx)("span",{children:p}):Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N,{user:s}),Object(a.jsx)("hr",{}),x&&Object(a.jsxs)("div",{children:[Object(a.jsx)(F,{username:e.match.params.username}),Object(a.jsx)(C,{username:s.username})]})]})," "]}):Object(a.jsx)("span",{children:"loading..."})})};t.default=function(){return Object(a.jsxs)(c.c,{children:[Object(a.jsx)(c.a,{exact:!0,path:"/users",component:b}),Object(a.jsx)(c.a,{path:"/users/:username/edit",component:D}),Object(a.jsx)(c.a,{path:"/users/:username",component:E})]})}}}]);
//# sourceMappingURL=15.b1a2e042.chunk.js.map